<!DOCTYPE html>
<html>
  <head>
    <title>Where Does My Money Go? - Closing the Deficit Gap</title>
    <link rel="stylesheet" href="http://assets.okfn.org/kforge/css/master.css" type="text/css" />
    <link rel="stylesheet" href="http://assets.okfn.org/ext/jquery.tablesorter/style.css" type="text/css">
    <link rel="stylesheet" href="../css/wdmmg.css" type="text/css">

    <!--
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript" src="http://assets.okfn.org/ext/jquery.tablesorter/2.0.3/jquery.tablesorter.js"></script>
    <script type="text/javascript" src="http://assets.okfn.org/ext/flot/0.6/excanvas.min.js"></script>
    <script type="text/javascript" src="http://assets.okfn.org/ext/flot/0.6/jquery.flot.min.js"></script>
    -->
    <!--[if IE]><script language="javascript" type="text/javascript" 
       src="vendor/flot-0.6/excanvas.min.js"></script><![endif]-->
    <script type="text/javascript" src="vendor/jquery-1.4.2.js"></script>
    <script type="text/javascript" src="vendor/jquery.tablesorter-2.0.3.js"></script>
    <script type="text/javascript" src="vendor/jquery.json-2.2.js"></script>
    <script type="text/javascript" src="vendor/flot-0.6/jquery.flot.js"></script>

    <script type="text/javascript" src="debug.js"></script>
    <script type="text/javascript" src="wdmmg.js"></script>
    <script type="text/javascript" src="gdocs.js"></script>
    <script type="text/javascript" src="budgetizer-config.js"></script>

    <script type="text/javascript">
    $(document).ready(function(){
      var apiurl = BudgetConfig.models[0].spreadsheet_url;
      $.getJSON(apiurl, function(data) {
        var tabular = gdocsToJavascript(data);
        var filterFunc = function(row) {
          return row[0] != 'NOTES';
        }
        tabular.data = tabular.data.filter(filterFunc);
        var tabularHtml = writeTabularAsHtml(tabular);
        var resultsTable = $('#results');
        resultsTable.append(tabularHtml['thead']);
        resultsTable.append(tabularHtml['tbody']);
        resultsTable.tablesorter();
        flotDatasets = {
          gdp: {
            label: 'GDP',
            data: makeSeries(tabular, 'period', 'gdp')
          },
          // deficitgdp: {
          //   label: 'Deficit (%tage GDP)',
          //   data: makeSeries(tabular, 'period', 'deficitgdp')
          // },
          deficit: {
            label: 'deficit',
            data: makeSeries(tabular, 'period', 'deficit')
          }
        }
        var flotChart1 = $("#flot-chart-1");
        setupFlot(flotDatasets, flotChart1);
        doFlotPlot(flotDatasets, flotChart1);
      });
    });
    </script>

    <style type="text/css">
      table#results {
        font-size: 60%;
      }
    </style>
  </head>
  <body>
  <h1><a href="http://www.wheredoesmymoneygo.org/">Where Does My Money Go?</a> - <a href="http://www.wheredoesmymoneygo.org/budget/">Budgetiser</a></h1>

  <div id="content">

    <div id="flot-chart-1">
      <h2 class="flot-title"></h2>
      <div class="flot-chart" style="width: 80%; margin: auto; height: 300px;"></div>
      <div class="flot-chart-controls">
        <div class="flot-chart-type">
          Chart type:
          <input type="checkbox" value="lines" name="lines" /> Lines
          <input type="checkbox" value="points" name="points" /> Points
          <input type="checkbox" value="bars" name="bars" /> Bars
        </div>
        <div class="flot-select-series">
            Series:
        </div>
      </div>
    </div>

    <table id="results" class="tablesorter">
    </table>

    <h2 id="about">About</h2>
    <p style="width: 50%; text-align: center; margin: auto;">
    A creation of the <a href="http://www.wheredoesmymoneygo.org/">Where Does My Money Go?</a> team. Researched by Tim Hubbard. Visualized by <a href="http://rufuspollock.org/">Rufus Pollock</a>.</p>
  </div><!-- /content -->
  </body>
</html>


